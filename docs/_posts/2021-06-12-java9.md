---
layout: post
title:  Neuerungen in Java 9
tags: [ Java ]
author: jacq42
excerpt_separator: <!--more-->
color: rgb(0, 100,100)
---

Welche Neuerungen wurden mit Java 9 implementiert?

<!--more-->

## Modulsystem: Jigsaw Project

Besteht ein Projekt aus mehreren Modulen, lassen sich die Zugriffe kontrollieren. `public` bedeutet nicht mehr für alle Klassen innerhalb des Projektes öffentlich, sondern nur im Modul. Es kann für andere Module freigegeben werden. Die Implementierungen bleiben jedoch hidden/private.\
So lassen sich monolitische Anwendungen besser durch mehrere Teams bearbeiten, ohne gleich auf Microservices umsteigen zu müssen.

Nähere Erläuterungen [hier](https://openjdk.java.net/projects/jigsaw/quick-start)

## Neuer HTTPClient

* befindet sich im Incubatormodul: `jdk.incubator.http`
* nutzt das Builderpattern, um einen Request/Response zu erstellen:

```java
HttpRequest request = HttpRequest.newBuilder()
  .uri(new URI("https://postman-echo.com/get"))
  .GET()
  .build();

HttpResponse<String> response = HttpClient.newHttpClient()
  .send(request, HttpResponse.BodyHandler.asString());
```

## Kleinere Sprachanpassungen

* Try-With-Resources:
    * Eine Variable muss nicht mehr mit new deklariert werden, wenn sie von einer (effektiv) final Variable referenziert wird

Seit Java7:
```java
MyAutoCloseable mac = new MyAutoCloseable();
try (mac) {
    // do some stuff with mac
}
```
Jetzt:
```java
try (new MyAutoCloseable() { }.finalWrapper.finalCloseable) {
   // do some stuff with finalCloseable
} catch (Exception ex) { }
```    

* Diamond Operator in anonymen inneren Klassen: vorher musste der Typ immer angegeben werden

```java
FooClass<Integer> fc = new FooClass<>(1) { // anonymous inner class
};
 
FooClass<? extends Integer> fc0 = new FooClass<>(1) { 
    // anonymous inner class
};
 
FooClass<?> fc1 = new FooClass<>(1) { // anonymous inner class
};
```

* Private Methoden in Interfaces: dadurch lassen sich komplexe Methode innerhalb der Interfaces besser modularisieren

## Neue APIs

* Immutable Sets:

    ```java
    Set<String> strSet = Set.of("item1", "item2", "item3");
    ```

* Optional to Stream: 

    ```java
    java.util.Optional.stream()
    ```

## JShell

* befindet sich unter `<JAVA_HOME>/bin`
* kann genutzt werden, um kleinere Codesnippets mal eben zu testen
* wenn Java als PATH gesetzt ist, dann einfach jshell tippen und:

```
|  Welcome to JShell -- Version 11.0.10
|  For an introduction type: /help intro

jshell> "   Ich bin ein unsauberer String. Bitte trimm mich.   ".trim()
$1 ==> "Ich bin ein unsauberer String. Bitte trimm mich."

jshell>
```

## Weitere Änderungen (noch nicht ausprobiert)

* das Java Commandtool (JCMD) bekam ein paar neue Commands: siehe auch in der [Referenz](https://docs.oracle.com/en/java/javase/11/tools/jcmd.html)
* es gibt eine Multi-Resolution Image API unter `java.awt.image.BaseMultiResolutionImage`
* Publisher-Subscripber Framework mit `java.util.concurrent.Flow`
* einheitliches JVM Logging

## Weitere Informationen

* [Java Upgrade examples](https://github.com/johanjanssen/JavaUpgrades)
* Von Baeldung [Java 9 Features](https://www.baeldung.com/java-9-new-features)