---
layout: post
title:  Neuerungen in Java 11 (LTS)
tags: [ Java ]
author: jacq42
excerpt_separator: <!--more-->
color: rgb(0, 100,100)
---

Welche Neuerungen wurden mit Java 11 implementiert?

<!--more-->

## Free vs. commercial

* Java10 ist das letzte Release von Oracle, das ohne Lizenz kommerziell genutzt werden kann
* ab Java11 muss entweder eine Lizenz gekauft werden oder es muss auf andere JDKs ausgewichen werden: [OpenJDK](https://openjdk.java.net/projects/jdk/), [GraalVM](https://www.graalvm.org), [AdoptJDK](https://adoptopenjdk.net/) und [viele andere mehr](https://github.com/akullpp/awesome-java#jvm-and-jdk)
* die Nutzung für die Entwicklung bleibt weiterhin frei

## Neue String Methoden

* `isBlank()`: beachtet genau wie strip Unicode whitespace characters
* `lines()`: liefert Stream von Strings für Multilinestrings. Behält Reihenfolge bei. Lineterminator wird entfernt.
* `strip`: entfernt Whitespace vorn und hinten
* `stripLeading`: entfernt Whitespace am Anfang
* `stripTrailing`: entfernt Whitespace am Ende
* `repeat`: Wiederholt einen String

Beispiele:
```java
"\n\t\u2005  ".isBlank() // true
"This is\n \n a multiline\n string.".lines() // Stream<String>
"  Sowas aber auch  ".strip() // "Sowas aber auch"
"  Sowas aber auch  ".stripLeading() // "Sowas aber auch  "
"  Sowas aber auch  ".stripTrailing() // "  Sowas aber auch"
"Blub ".repeat(3); // "Blub Blub Blub"
```

Unterschied `strip()` zu `trim()`: 
* strip entfernt auch Unicode-Whitespace
* trim entfernt nur Whitespace unterhalb von (U+0020)

## Neue File Methoden

Statische Methoden der `File` Klasse:
```java
Path filePath = Files.writeString(Files.createTempFile(tempDir, "demo", ".txt"), "Sample text");
String fileContent = Files.readString(filePath);
assertThat(fileContent).isEqualTo("Sample text");
```

## Collection to an Array

`java.util.Collection` hat jetzt eine toArray Methode:
```java
List sampleList = Arrays.asList("Java", "Kotlin");
String[] sampleArray = sampleList.toArray(String[]::new);
```

## Negiertes Predicate

`Predicate.not()` zum Umkehren eines Predicate. Kann auch mit Methodenreferenzen (String::isBlank) genutzt werden

## Lokale Variablensyntax für Lambdas

* Keyword `var` kann auch in Lambdas genutzt werden und der Typ wird automatisch erkannt

## HTTP Client

* wurde mit Java9 eingeführt (Inkubator)
* ist jetzt im Standard enthalten unter `java.net.http`
* Näheres siehe [hier](https://www.baeldung.com/java-9-http-client)

## Nestmate Reflection API

Ein Nest besteht aus:
```java
public class Outer {

    public void outerPublic() {
    }

    private void outerPrivate() {
    }

    class Inner {

        public void innerPublic() {
            outerPrivate();
        }
    }
}
```
Outer und Inner sind ein **nest**. Zwei Mitglieder eines Nests sind **nestmates**.

Auf private Methoden sollten nestmates nicht zugreifen können. Wird über die Bridgemethode umgesetzt. Als Konsequenz funktionert Reflection auch nicht mehr:
```java
public void innerPublicReflection(Outer ob) throws Exception {
    Method method = ob.getClass().getDeclaredMethod("outerPrivate");
    method.invoke(ob);
}
```
liefert `IllegalAccessException`

`java.lang.Class` bekommt neue Methoden:
* `getNestHost()`: `Outer.class.getNestHost().getName()`, `Outer.Inner.class.getNestHost().getName()`
* `isNestmateOf()`: `Outer.Inner.class.isNestmateOf(Outer.class)`
* `getNestMembers`: liefert Array aller Member

## Running Java Files

* Javadateien müssen nicht mehr mit javac kompiliert werden, bevor sie ausgeführt werden: `java HelloWorld.java` übernimmt das mit

## Performanceverbesserungen

Neben einigen Performanceverbesserungen gibt es auch einen neuen Garbage Collector: Epsilon. Es ist ein No-op GC, da er zwar Speicher allociert, aber keine Objekte sammelt. Gedacht für Performancetesting, Memorytesting, VM Interface Testing, sehr kurzlebige Prozesse. Einschalten über `-XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC`

Java Flight Recorder ist jetzt OpenSource in OpenJDK. Ist ein Profiling Tool und kann zusammen mit JDK Mission Control genutzt werden: siehe dazu auch [hier](https://www.baeldung.com/java-flight-recorder-monitoring).

## Entfernt

Aus JavaSE entfernt:

* Java API for XML-Based Web Services (java.xml.ws)
* Java Architecture for XML Binding (java.xml.bind)
* JavaBeans Activation Framework (java.activation)
* Common Annotations (java.xml.ws.annotation)
* Common Object Request Broker Architecture (java.corba)
* JavaTransaction API (java.transaction)

JDK Mission Control (JMC) und JavaFX wurden aus dem JDK entfernt und sind jetzt als Standalone Lösungen zu haben.

Deprecated:
* Nashorn JavaScript engine, including the JJS tool
* Pack200 compression scheme for JAR files

## Weitere erwähnenswerte Neuerungen

* New ChaCha20 and ChaCha20-Poly1305 cipher implementations replace the insecure RC4 stream cipher
* Support for cryptographic key agreement with Curve25519 and Curve448 replace the existing ECDH scheme
* Upgraded Transport Layer Security (TLS) to version 1.3 brings security and performance improvements
* Introduced a low latency garbage collector, ZGC, as an experimental feature with low pause times
* Support for Unicode 10 brings more characters, symbols, and emojis

## Weitere Informationen

* [Java Upgrade examples](https://github.com/johanjanssen/JavaUpgrades)
* Von Baeldung [Java 11 Features](https://www.baeldung.com/java-11-new-features)
* Von Baeldung [Java 11 Nest Based Access Control](https://www.baeldung.com/java-nest-based-access-control)